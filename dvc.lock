schema: '2.0'
stages:
  prepare:
    cmd: python data_loader.py data/all_data data/prepared
    deps:
    - path: data/all_data
      hash: md5
      md5: d9136130f3edf731ea7d5bf558c20bd7.dir
      size: 375986530
      nfiles: 14493
    - path: data_loader.py
      hash: md5
      md5: 3df803cbda8ed12e142fcc26f7ebf8ed
      size: 1945
    params:
      params.yaml:
        data:
          dir: ./data/all_data
        prepare:
          seed: 42
          split: 0.3
          sample_fraction: 0.2
          excluded_classes:
          - sky surfing
          max_images_per_class: 107
        train:
          seed: 42
          lr: 0.005
          epochs: 2
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: data/prepared
      hash: md5
      md5: a32ea21d93c7993083cd41209c15a860.dir
      size: 5196835
      nfiles: 210
  train:
    cmd: python train.py data/prepared model_versions
    deps:
    - path: data/prepared
      hash: md5
      md5: a32ea21d93c7993083cd41209c15a860.dir
      size: 5196835
      nfiles: 210
    - path: train.py
      hash: md5
      md5: 2860d6483c9d175de837a3a2c4481bef
      size: 6582
    params:
      params.yaml:
        model:
          name: google/efficientnet-b0
        train:
          seed: 42
          lr: 0.005
          epochs: 2
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: model_versions
      hash: md5
      md5: a16a32bdc9293adbc7d5f103a2d1f043.dir
      size: 16322443
      nfiles: 4
  evaluate:
    cmd: python evaluate.py model_versions data/prepared evaluation_outputs
    deps:
    - path: data/prepared
      hash: md5
      md5: a32ea21d93c7993083cd41209c15a860.dir
      size: 5196835
      nfiles: 210
    - path: evaluate.py
      hash: md5
      md5: c92a432e42d4f5e046de0f474e1a7cd7
      size: 10940
    - path: model_versions
      hash: md5
      md5: a16a32bdc9293adbc7d5f103a2d1f043.dir
      size: 16322443
      nfiles: 4
    outs:
    - path: evaluation_outputs/confusion_matrix.png
      hash: md5
      md5: 9e7c04af1ade807e51354e253b5d14fb
      size: 48587
    - path: evaluation_outputs/loss_curve.png
      hash: md5
      md5: b96293951b3bc48d90fe4d544816a8e7
      size: 24098
    - path: evaluation_outputs/metrics.json
      hash: md5
      md5: 268c838394235a6ea54a0762a4405414
      size: 2323
    - path: evaluation_outputs/normalized_confusion_matrix.png
      hash: md5
      md5: 159473230f8d386afb7159d373e22d75
      size: 64470
    - path: evaluation_outputs/precision_recall_curves.png
      hash: md5
      md5: fed531fd9b15586fb8ab84e3688d2cd4
      size: 45983
