schema: '2.0'
stages:
  prepare:
    cmd: python data_loader.py data/all_data data/prepared
    deps:
    - path: data/all_data
      hash: md5
      md5: d9136130f3edf731ea7d5bf558c20bd7.dir
      size: 375986530
      nfiles: 14493
    - path: data_loader.py
      hash: md5
      md5: e4ff74eb3be0a946f9fb14f1ab247078
      size: 1995
    params:
      params.yaml:
        data:
          dir: ./data/all_data
        prepare:
          seed: 42
          split: 0.3
          sample_fraction: 0.2
          excluded_classes:
          - sky surfing
          max_images_per_class: 107
        train:
          seed: 42
          lr: 0.005
          epochs: 2
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: data/prepared
      hash: md5
      md5: 259302cb53c22ad259108042e9b2c621.dir
      size: 5138578
      nfiles: 210
  train:
    cmd: python train.py data/prepared model_versions
    deps:
    - path: data/prepared
      hash: md5
      md5: 259302cb53c22ad259108042e9b2c621.dir
      size: 5138578
      nfiles: 210
    - path: train.py
      hash: md5
      md5: ee0147ad08bf3c647b49863bae1f13a4
      size: 6349
    params:
      params.yaml:
        model:
          name: google/efficientnet-b0
        train:
          seed: 42
          lr: 0.005
          epochs: 2
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: model_versions
      hash: md5
      md5: 064a46a05707cbd408a61f12201f0857.dir
      size: 16320540
      nfiles: 4
  evaluate:
    cmd: python evaluate.py model_versions data/prepared evaluation_outputs
    deps:
    - path: data/prepared
      hash: md5
      md5: 964ec324c2b9a99ba860757511325f5a.dir
      size: 18723116
      nfiles: 749
    - path: evaluate.py
      hash: md5
      md5: a662bd75cbdd8e2d61f9dbe8e274c386
      size: 9146
    - path: model_versions
      hash: md5
      md5: f8760853a699e53ccfc30ae885bf4ad4.dir
      size: 16309897
      nfiles: 4
    outs:
    - path: evaluation_outputs/confusion_matrix.png
      hash: md5
      md5: cb5b8b6c0fc9f5131022679c0d73b21b
      size: 42759
    - path: evaluation_outputs/loss_curve.png
      hash: md5
      md5: c7e88fae313f6b4c4cb66ae6f5a37bf8
      size: 27054
    - path: evaluation_outputs/metrics.json
      hash: md5
      md5: 0045bc7ecee2a4dbb715ea2c7a7c259c
      size: 1992
    - path: evaluation_outputs/normalized_confusion_matrix.png
      hash: md5
      md5: e4cdae3a878b0e7a7fe2ddc93c495fce
      size: 54477
    - path: evaluation_outputs/precision_recall_curves.png
      hash: md5
      md5: e46bff1b55e8d0f0b844ca2c2b01c390
      size: 40101
