schema: '2.0'
stages:
  prepare:
    cmd: python data_loader.py data/all_data data/prepared
    deps:
    - path: data/all_data
      hash: md5
      md5: d9136130f3edf731ea7d5bf558c20bd7.dir
      size: 375986530
      nfiles: 14493
    - path: data_loader.py
      hash: md5
      md5: dc015fbc5195283045e6836ba03ced65
      size: 370
    params:
      params.yaml:
        data:
          dir: ./data/all_dataJ
        prepare:
          seed: 42
          split: 0.3
          sample_fraction: 1
          excluded_classes:
          - sky surfing
          max_images_per_class: 107
    outs:
    - path: data/prepared
      hash: md5
      md5: 964ec324c2b9a99ba860757511325f5a.dir
      size: 18723116
      nfiles: 749
  train:
    cmd: python train.py data/prepared model_versions
    deps:
    - path: data/prepared
      hash: md5
      md5: 964ec324c2b9a99ba860757511325f5a.dir
      size: 18723116
      nfiles: 749
    - path: train.py
      hash: md5
      md5: af43e27fdf67a8ea1109d9ff5c0f9f95
      size: 4943
    params:
      params.yaml:
        model:
          name: google/efficientnet-b0
        train:
          seed: 42
          lr: 5e-05
          epochs: 2
          batch_size: 10
          num_classes: 7
          num_folds: 3
    outs:
    - path: model_versions
      hash: md5
      md5: 540a892b1b5599863cb5408683e4e557.dir
      size: 16310894
      nfiles: 4
  evaluate:
    cmd: python evaluate.py model_versions data/prepared evaluation_outputs
    deps:
    - path: data/prepared
      hash: md5
      md5: 964ec324c2b9a99ba860757511325f5a.dir
      size: 18723116
      nfiles: 749
    - path: evaluate.py
      hash: md5
      md5: a662bd75cbdd8e2d61f9dbe8e274c386
      size: 9146
    - path: model_versions
      hash: md5
      md5: 540a892b1b5599863cb5408683e4e557.dir
      size: 16310894
      nfiles: 4
    outs:
    - path: evaluation_outputs/confusion_matrix.png
      hash: md5
      md5: 90236dc633bd7b61c634ba7975a36bd9
      size: 42878
    - path: evaluation_outputs/loss_curve.png
      hash: md5
      md5: 7205364651057ed210449e4d56e1696a
      size: 28051
    - path: evaluation_outputs/metrics.json
      hash: md5
      md5: b3a85127ca95d514a184546e3567c1de
      size: 2001
    - path: evaluation_outputs/normalized_confusion_matrix.png
      hash: md5
      md5: 127847f21c1a46c6636d4d7620d2da96
      size: 56279
    - path: evaluation_outputs/precision_recall_curves.png
      hash: md5
      md5: d886929734fbc3764fc3e7c9479910b0
      size: 39931
