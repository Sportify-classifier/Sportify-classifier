schema: '2.0'
stages:
  prepare:
    cmd: python data_loader.py data/all_data data/prepared
    deps:
    - path: data/all_data
      hash: md5
      md5: cec9c03ade7ae449c4cfcd28bee30ecc.dir
      size: 375855134
      nfiles: 14492
    - path: data_loader.py
      hash: md5
      md5: e4ff74eb3be0a946f9fb14f1ab247078
      size: 1995
    params:
      params.yaml:
        data:
          dir: ./data/all_data
        prepare:
          seed: 42
          split: 0.3
          image_size: 224
          sample_fraction: 0.19
          excluded_classes:
          - sky surfing
          - ultimate
          - wingsuit flying
          - arm wrestling
          - horseshoe pitching
          - water cycling
          - wheelchair basketball
          - baton twirling
          - hydroplane racing
          max_images_per_class: 120
        train:
          seed: 42
          lr: 0.0006
          epochs: 2
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: data/prepared
      hash: md5
      md5: 04f1d437c7d0682bc14e37ab6e55e161.dir
      size: 6012495
      nfiles: 220
  train:
    cmd: python train.py data/prepared model_versions
    deps:
    - path: data/prepared
      hash: md5
      md5: 04f1d437c7d0682bc14e37ab6e55e161.dir
      size: 6012495
      nfiles: 220
    - path: train.py
      hash: md5
      md5: cb23105ab38193d0f75a00145fb6dd74
      size: 6990
    params:
      params.yaml:
        model:
          name: google/efficientnet-b0
        train:
          seed: 42
          lr: 0.0006
          epochs: 2
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: model_versions
      hash: md5
      md5: e483960aa7fad1ccecb13607d23b3cde.dir
      size: 31332670
      nfiles: 5
  evaluate:
    cmd: python evaluate.py model_versions data/prepared evaluation_outputs
    deps:
    - path: data/prepared
      hash: md5
      md5: 04f1d437c7d0682bc14e37ab6e55e161.dir
      size: 6012495
      nfiles: 220
    - path: evaluate.py
      hash: md5
      md5: 036680def3579c1c2995b2104f8872a1
      size: 8321
    - path: model_versions
      hash: md5
      md5: e483960aa7fad1ccecb13607d23b3cde.dir
      size: 31332670
      nfiles: 5
    outs:
    - path: evaluation_outputs/confusion_matrix.png
      hash: md5
      md5: 8cc9c58a2a6cf7a5c9719164b5c83a1c
      size: 47291
    - path: evaluation_outputs/loss_curve.png
      hash: md5
      md5: 499044ee178045be03c0a7d3b84e3654
      size: 25569
    - path: evaluation_outputs/metrics.json
      hash: md5
      md5: fa30b6256a29d39924d8a5c0936ad42e
      size: 2374
    - path: evaluation_outputs/normalized_confusion_matrix.png
      hash: md5
      md5: 61cc579129767634b606b5c7972923d9
      size: 62435
    - path: evaluation_outputs/precision_recall_curves.png
      hash: md5
      md5: ccb9576fd493fc4fc75f9e4ff64bed1c
      size: 44358
