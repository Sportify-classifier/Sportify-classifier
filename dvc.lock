schema: '2.0'
stages:
  prepare:
    cmd: python data_loader.py data/all_data data/prepared
    deps:
    - path: data/all_data
      hash: md5
      md5: d9136130f3edf731ea7d5bf558c20bd7.dir
      size: 375986530
      nfiles: 14493
    - path: data_loader.py
      hash: md5
      md5: 3df803cbda8ed12e142fcc26f7ebf8ed
      size: 1945
    params:
      params.yaml:
        data:
          dir: ./data/all_data
        prepare:
          seed: 42
          split: 0.3
          image_size: 224
          sample_fraction: 0.3
          excluded_classes:
          - sky surfing
          max_images_per_class: 107
        train:
          seed: 42
          lr: 0.005
          epochs: 1
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: data/prepared
      hash: md5
      md5: 49b65672f75dc4dbbfee18f2e80e075c.dir
      size: 7865013
      nfiles: 320
  train:
    cmd: python train.py data/prepared model_versions
    deps:
    - path: data/prepared
      hash: md5
      md5: 49b65672f75dc4dbbfee18f2e80e075c.dir
      size: 7865013
      nfiles: 320
    - path: train.py
      hash: md5
      md5: 52320f89f1e6da7034a1b0e19ef68f0b
      size: 7531
    params:
      params.yaml:
        model:
          name: google/efficientnet-b0
        train:
          seed: 42
          lr: 0.005
          epochs: 1
          batch_size: 16
          num_classes: 10
          num_folds: 2
    outs:
    - path: model_versions
      hash: md5
      md5: 2708e19dd515836c63c5156743d2cf61.dir
      size: 31314154
      nfiles: 5
  evaluate:
    cmd: python evaluate.py model_versions data/prepared evaluation_outputs
    deps:
    - path: data/prepared
      hash: md5
      md5: 49b65672f75dc4dbbfee18f2e80e075c.dir
      size: 7865013
      nfiles: 320
    - path: evaluate.py
      hash: md5
      md5: 8618cf193bfcb6fd6ad00081d6015bde
      size: 11372
    - path: model_versions
      hash: md5
      md5: 2708e19dd515836c63c5156743d2cf61.dir
      size: 31314154
      nfiles: 5
    outs:
    - path: evaluation_outputs/confusion_matrix.png
      hash: md5
      md5: 18c2b571b0e6b39baaf45c2c64017ffb
      size: 49684
    - path: evaluation_outputs/loss_curve.png
      hash: md5
      md5: 58c9d09c020885e2432ce546ecbe109f
      size: 17841
    - path: evaluation_outputs/metrics.json
      hash: md5
      md5: 4c800d259c197dcc8dce0fdc78290ab5
      size: 2267
    - path: evaluation_outputs/normalized_confusion_matrix.png
      hash: md5
      md5: 4a80da0a6ae8d12d7c2c2c4ab4127261
      size: 66334
    - path: evaluation_outputs/precision_recall_curves.png
      hash: md5
      md5: f4f51251bd69569704eee364e2354949
      size: 45760
